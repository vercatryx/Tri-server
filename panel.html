<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Diet Fantasy — Panel</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root{
            --bg:#0f172a; --muted:#9ca3af; --text:#e5e7eb;
            --line:#1f2937; --line-strong:#0b1222;
            --primary:#2563eb; --pill:#111827; --hover:#0c1326;
            --ok:#10b981; --warn:#f59e0b; --bad:#ef4444;
            --w: 360px;
            --log-h: 150px;
            --btn-slate:#6b7280; --btn-slate-h:#4b5563;
            --btn-blue:#3b82f6; --btn-blue-h:#2563eb;
            --btn-orange:#f59e0b; --btn-orange-h:#d97706;
            --btn-red:#ef4444; --btn-red-h:#dc2626;
        }
        *{ box-sizing:border-box }
        html,body{
            height:100%; margin:0; background:var(--bg); color:var(--text);
            font:14px/1.3 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
            overflow-x:hidden;
        }
        .panel{ display:flex; flex-direction:column; height:100%; width:var(--w); max-width:var(--w) }

        .head{ padding:12px 14px; font-weight:600; border-bottom:1px solid var(--line) }

        /* Full-width tabs (50% each) */
        .tabs{ display:flex; width:100%; padding:0; margin:0; border-bottom:1px solid var(--line) }
        .tab{
            all:unset; cursor:pointer; padding:10px 0; text-align:center; flex:1 1 50%;
            background:var(--pill); color:#cbd5e1; font-weight:600; border-right:1px solid var(--line);
        }
        .tab:last-child{ border-right:none }
        .tab[aria-selected="true"]{ background:var(--primary); color:white }

        .body{ display:flex; flex-direction:column; flex:1 1 auto; min-height:0 }

        /* AUTO */
        #autoWrap{ display:flex; flex-direction:column; flex:1 1 auto; min-height:0 }
        .controls{ padding:10px 12px; display:flex; flex-direction:column; gap:8px; border-bottom:2px solid var(--line-strong) }


        .rowA{ display:flex; align-items:center; gap:8px; flex-wrap:wrap }
        .rowB{ display:flex; align-items:center; gap:8px; flex-wrap:wrap }

        .btn{ all:unset; cursor:pointer; padding:10px 16px; border-radius:20px; color:#fff; font-weight:600 }
        .btn.slate  { background:var(--btn-slate)  } .btn.slate:hover  { background:var(--btn-slate-h) }
        .btn.blue   { background:var(--btn-blue)   } .btn.blue:hover   { background:var(--btn-blue-h) }
        .btn.orange { background:var(--btn-orange) } .btn.orange:hover { background:var(--btn-orange-h) }
        .btn.red    { background:var(--btn-red)    } .btn.red:hover    { background:var(--btn-red-h) }
        .btn.toggle { background:#374151; color:#9ca3af; padding:8px 14px; border-radius:16px; font-size:13px }
        .btn.toggle.active { background:var(--primary); color:#fff }

        label { font-size:12px; color:var(--muted) }
        input[type="date"]{ background:#0b1222; color:var(--text); border:1px solid var(--line); border-radius:10px; padding:8px 10px; width:122px }
        input[type="date"]::-webkit-calendar-picker-indicator{ filter: invert(1) brightness(1.4); opacity:.95 }

        /* Search */
        .searchRow{ display:flex; gap:8px; align-items:center; margin-top:2px }
        #inpSearch{
            width:100%; padding:10px 12px; background:#0b1222; color:var(--text);
            border:1px solid var(--line); border-radius:10px; outline:none; font-size:13px;
        }
        #inpSearch:focus{ border-color:#334155; box-shadow:0 0 0 2px rgba(59,130,246,.15) }

        .lists{ display:flex; flex-direction:column; flex:1 1 auto; min-height:0; border-top:1px solid var(--line) }
        .list{ flex:1 1 auto; min-height:0; overflow:auto; padding:4px 0 }

        /* Row: number | status | name | pills */
        .row{
            display:grid; grid-template-columns:24px 24px minmax(160px,1fr) auto;
            align-items:center; gap:8px; padding:10px 12px; border-bottom:1px solid #0f172a;
        }
        .row:hover{ background:var(--hover) }
        .num{ width:24px; text-align:center; font-weight:700; color:#fff; opacity:.9 }
        .status{ width:18px; height:18px; display:grid; place-items:center; border-radius:6px }
        .status.ok{ background:var(--ok); color:#062a22; font-weight:900; font-size:12px }
        .status.warn{ background:var(--warn); color:#2b1900; font-weight:900; font-size:12px }
        .status.bad{ background:var(--bad); color:#2b0000; font-weight:900; font-size:12px }
        .status.pending{ background:#3b82f6 }
        .name{ grid-column:3/4; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap }
        .pills{ grid-column:4/5; display:flex; gap:6px; align-items:center; justify-self:end }
        .pill{ min-width:18px; height:18px; display:inline-grid; place-items:center; border-radius:999px; background:var(--pill); padding:0 8px; font-size:12px; color:#cbd5e1 }
        .sub{ grid-column:3/5; font-size:12px; color:var(--muted); white-space:normal; word-break:break-word; line-height:1.25; padding-top:2px }

        /* Logs bar with toggles */
        .logbar{ display:flex; align-items:center; justify-content:space-between; padding:8px 12px; border-top:2px solid var(--line-strong); border-bottom:1px solid var(--line) }
        .logtitle{ font-size:12px; color:#cbd5e1; opacity:.9 }
        .logbtns{ display:flex; gap:8px; align-items:center }
        .btn.micro{ padding:4px 10px; border-radius:14px; font-size:12px; line-height:1; color:#e5e7eb; background:var(--btn-slate); cursor:pointer }
        .btn.micro:hover{ background:var(--btn-slate-h) }
        .btn.micro.toggle.active{ background:var(--btn-blue) }
        .btn.micro.toggle.active:hover{ background:var(--btn-blue-h) }

        .log{ flex:0 0 var(--log-h); height:var(--log-h); overflow:auto; padding:8px 12px; font-family:ui-monospace,Menlo,Consolas,monospace; font-size:12px; color:#cbd5e1; background:#0b1222 }

        .foot{ padding:8px 12px; border-top:2px solid var(--line-strong); display:flex; justify-content:space-between; align-items:center; font-size:12px; color:var(--muted); gap:8px }
        .countfoot{ color:#cbd5e1; flex:1 }
        .foot .btn.slate#btnUnitedUsLogin{ background:var(--btn-blue) }
        .foot .btn.slate#btnUnitedUsLogin:hover{ background:var(--btn-blue-h) }

        /* Manual iframe */
        #manualWrap{ display:none; flex:1 1 auto; min-height:0 }
        #manualFrame{ width:100%; height:100%; border:0; background:transparent }
    </style>
</head>
<body>
<div class="panel">


    <div class="tabs">
        <button class="tab" id="tabAuto" aria-selected="true">Auto</button>
        <button class="tab" id="tabManual" aria-selected="false">Manual</button>
    </div>

    <div class="body">
        <!-- AUTO -->
        <div id="autoWrap">
            <div class="controls" id="controls">
                <div class="rowA">
                    <button class="btn slate"  id="btnRefresh">Refresh</button>
                    <button class="btn blue"   id="btnStart">Start</button>
                    <button class="btn orange" id="btnPause">Pause</button>
                    <button class="btn red"    id="btnStop">Stop</button>
                </div>
                <div class="rowB" id="runOpts">
                    <button class="btn toggle active" id="btnUpload" data-checked="true">Upload</button>
                    <button class="btn toggle active" id="btnBilling" data-checked="true">Billing</button>
                    <label for="inpDeliveryDate">Delivery</label>
                    <input type="date" id="inpDeliveryDate" />
                    <label for="inpStartDate">Start</label>
                    <input type="date" id="inpStartDate" />
                    <label for="inpEndDate">End</label>
                    <input type="date" id="inpEndDate" />
                </div>
                <div class="searchRow">
                    <input id="inpSearch" type="text" placeholder="Search by name…" autocomplete="off" />
                </div>
            </div>

            <div class="lists" id="lists">
                <div class="list" id="list"><div style="padding:10px 12px;">Loading…</div></div>
                <div class="logbar">
                    <div class="logtitle">Logs</div>
                    <div class="logbtns">
                        <button class="btn micro toggle" id="btnErrors" title="Show only users with errors">Errors</button>
                        <button class="btn micro" id="btnResetSkips" title="Reset all skipped users">Reset Skips</button>
                        <button class="btn micro" id="btnClearLog" title="Clear log">Clear</button>
                    </div>
                </div>
                <div class="log" id="log"></div>
            </div>
        </div>

        <!-- MANUAL -->
        <div id="manualWrap">
            <iframe id="manualFrame" src="manual.html"></iframe>
        </div>
    </div>

    <div class="foot">
        <button class="btn slate" id="btnUnitedUsLogin">Login</button>
        <span class="countfoot" id="countFoot">—</span>
        <button class="btn slate" id="btnClose">Close</button>
    </div>
</div>

<script src="panel.js"></script>
</body>
</html>